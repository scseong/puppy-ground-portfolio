## **🐶 Puppy Ground (퍼피 그라운드)**

**반려견 중고 물품 거래 & 정보 공유 플랫폼**

> 반려견 중고 용품 거래를 통해 자원 순환을 돕고, 유기견 입양 및 동반 시설 정보 공유를 통해 책임감 있는 반려 문화를 조성하고자 기획된 커뮤니티 기반 웹 서비스입니다.

> "사지 말고 입양하자"는 따뜻한 취지를 담아 반려인과 예비 반려인 모두에게 유용한 정보를 제공하고, 소통의 장을 마련했습니다.

> 📌 스파르타코딩클럽 내일배움캠프에서 활동하며 진행한 팀프로젝트입니다.



### **📅 프로젝트 개요**

- **기간**: 2024.01.04 ~ 2024.02.08 (5주)
- **프로젝트명**: Puppy Ground (퍼피 그라운드)
- **기획 의도**:
  - 사용하지 않는 반려견 용품을 지역 커뮤니티 내에서 손쉽게 중고 거래할 수 있는 플랫폼 구축
  - 전국 유기견 보호소 입양 정보 및 반려견 동반 시설 정보 제공
  - 반려인 간 교류 활성화를 위한 커뮤니티형 서비스 구현

### **🌐 포트폴리오 및 코드 링크**

- **포트폴리오 웹사이트 (배포 링크)**: https://puppy-ground-portpolio.vercel.app/
- **GitHub 저장소**: https://github.com/nbcamp-mot/puppy-ground
- **Figma (스크린샷)**: https://github.com/nbcamp-mot/puppy-ground/wiki/와이어프레임

### **👥 팀 소개**

- **팀명**: 막내 온 TOP
- **팀원**: 염혜원(팀장), 천영륜, 손지원, **손창성(본인)**, 이예지 [FE 5명]
- **디자이너**: 박애리

### **🌟 주요 기능 및 구현 상세**

- **회원가입/로그인:** `Supabase Auth`를 활용한 이메일 기반 회원가입/로그인 및 카카오/구글 소셜 로그인
- **중고거래**: 중고 물품 목록 및 상세 정보 조회, 검색/필터/페이지네이션, 지도 기반 거래 장소 안내, 찜/채팅/SNS 공유
- **멍스타그램**: 피드 목록, 이미지 멀티 업로드, 태그 등록, 좋아요/댓글, SNS 공유, 상세 모달
- **반려견 동반 시설:** `Kakao Map API`를 활용하여 주변 시설 마커 표시 및 키워드 검색
- **유기견 공고:** 공공 API 연동 (전국 유기견 보호소 공고), 지역/날짜별 필터링
- **마이페이지:** 프로필 수정, 내가 등록/찜한 상품, 좋아요한 게시물 관리
- **실시간 알림 및 채팅:** `Supabase Realtime`을 활용한 실시간 알림 및 채팅 기능으로 거래

### **📌 담당한 역할 및 주요 기여**

본 프로젝트에서 프론트엔드 개발자로서 주로 **중고 물품 목록 및 상세 정보 조회, 효율적인 검색/필터/페이지네이션 기능 개발, 멍스타그램 피드 목록과 상세 모달 및 사용자 인터랙션 개선**을 담당했습니다. 또한 **팀의 생산성 향상과 효율적인 협업 환경 조성**에 기여했습니다.

- **[ 주요 기능 구현 ]**
  - **중고거래 페이지**: 중고 물품 목록 및 상세 데이터 연동, 효율적인 검색/필터/페이지네이션 기능 개발에 주도적으로 참여하며 사용자에게 최적화된 탐색 경험을 제공했습니다.
  - **멍스타그램 페이지**: 멍스타그램 데이터 연동 및 사용자 인터랙션 개선(Next.js App Router 기반 모달 구현 포함)을 통해 매끄럽고 일관된 소셜 미디어 경험을 구현했습니다.
- **[ 팀 리더십 및 협업 프로세스 구축 ]**
  - 원활한 협업을 위해 코드 컨벤션 문서를 작성하고 코드 리뷰를 도입함으로써 자유롭게 의견을 교류할 수 있는 팀 분위기와 환경을 만들었습니다.
  - 효율적인 개발 프로세스 구축을 위해 **Git Branch 전략(Git Flow)**을 도입하고, GitHub의 **Issue, PR, Projects, Milestone, Wiki** 기능을 적극 활용하여 작업 관리 및 문서화 체계를 확립했습니다.
  - 또한, **Slack과 GitHub 연동**을 통해 실시간 알림 시스템을 구축하여 팀원 간의 신속한 정보 공유 및 협업 효율성을 향상시켰습니다.

### **💥 트러블슈팅**

**#1. 복잡한 다중 필터 로직 처리**

**[ 문제 정의 ]**

Puppy Ground의 중고 물품 거래 서비스에서는 사용자의 탐색 편의성을 위해 다양한 조건(카테고리, 견종 사이즈, 판매 상태, 페이지)을 조합하여 물품을 검색하는 **다중 필터 기능**을 제공했습니다.

초기에는 각 필터가 독립적으로 작동하여 필터 간 의존성 문제로 인해 예상치 못한 상태 변화나 검색 결과 불일치가 발생했고, 이는 사용자 경험 저하와 코드 유지보수 난이도 증가로 이어졌습니다.

게다가, 여러 필터를 사용하고 페이지를 전환하는 등 물품 탐색을 위한 상태를 유지할 필요가 있었습니다. 왜냐하면 다른 페이지로 이동한 후에 해당 페이지로 돌아왔을 때 필터 상태가 해제되면 다시 필터를 설정하고 재탐색해야 하는 불편함이 있었기 때문입니다.

**[ 해결 과정 및 적용 기술 ]**

단순히 각 필터의 상태를 컴포넌트 내에서 개별적으로 관리하는 방식으로는 필터 의존성을 효율적으로 제어하기 어렵다고 판단했습니다. 컴포넌트에서 개별적으로 상태를 관리할 경우 상태 동기화 문제가 빈번히 발생하고 `props drilling`과 같은 구조적 문제로 코드 복잡성이 증가했기 때문입니다.

이에 따라, 필터 상태를 **URL 쿼리 파라미터에 반영**하고 **각 필터의 우선순위에 따라 하위 필터의 상태를 제어**하는 방식을 채택했습니다.

- **URL 기반의 상태 관리**

  - `useQueryParam` 커스텀 훅의 `generateQueryParameter` 함수를 개발하여 `URLSearchParams` 객체를 동적으로 관리했습니다. 사용자가 필터를 변경하면 `generateQueryParameter` 함수가 해당 필터의 유형을 매개변수로 받아 필터 우선순위(카테고리 > 견종 크기 > 판매 여부 > 페이지)에 따라 하위 필터 값을 `queryString.delete()`를 통해 초기화하며 새로운 URL을 생성합니다.
  - Next.js 서버 컴포넌트인 페이지 컴포넌트에서 `searchParams`를 활용해 URL 쿼리 파라미터 기반으로 초기 데이터를 페칭하고 UI를 렌더링했습니다. 이를 통해 필터 상태가 URL에 직접 반영되도록 구현하여 사용자가 어떤 경로로 진입하든 일관된 필터 상태의 페이지를 경험할 수 있게 했습니다.
  - `generateQueryParameter` 함수를 통해 생성된 URL은 Next.js의 `<Link>` 컴포넌트에 연결되거나 필터의 값이 변경될 경우 `router.push()`를 통해 브라우저 URL을 갱신합니다. URL 변화를 감지한 서버 컴포넌트가 새로운 `searchParams`를 기반으로 데이터를 재페칭하여 UI를 실시간으로 갱신하도록 구현했습니다.

- **TanStack Query를 활용한 동적 캐싱 및 데이터 페칭**

  - URL의 `searchParams` 객체에 포함된 모든 필터 값들을 `queryKey`에 함께 담아 동적으로 캐시 키를 생성했습니다.

    ```tsx
    // src/app/(providers)/used-goods/page.tsx
    const UsedGoodsContainer = async ({ searchParams }: { searchParams: SearchParams }) => {
      const [queryKey, queryFn] = [getQueryKey(searchParams), getQueryFunction(searchParams)];
      const queryClient = new QueryClient();
      await queryClient.prefetchQuery({ queryKey, queryFn });
      // ...
      return (
        // ...
        <HydrationBoundary state={dehydrate(queryClient)}>
          <UsedGoodsList />
        </HydrationBoundary>
      );
    };
    ```

    ```tsx
    // src/apis/goods.ts 
    export const usedGoodsKeys = {
      all: (params: SearchParams) => ['used-goods', { ...params }] as const
    };
    
    export const getQueryKey = (params: SearchParams) => {
      return usedGoodsKeys.all(params);
    };
    
    export const getQueryFunction = (params: SearchParams) => {
      return () => getUsedGoods(params); 
    };
    ```

  - 클라이언트의 `UsedGoodsList` 컴포넌트에서 `useQuery`는 이 동적으로 생성된 `queryKey`를 인식하여 캐시된 데이터가 존재하면 네트워크 재요청 없이 즉시 데이터를 반환하고 필요한 경우에만 백그라운드에서 데이터를 업데이트합니다.

  ------

**[ 결과 ]**

URL 기반 상태 관리와 필터 우선순위 제어를 통해 사용자는 일관되고 예측 가능한 검색 환경을 경험하게 되었으며 TanStack Query 캐싱 전략으로 로딩 속도와 데이터 효율성을 개선하여 사용자 편의성을 향상시켰습니다.

**#2. 콘텐츠 탐색을 위한 모달 라우팅 설계**

**[ 문제 정의 ]**

Puppy Ground의 멍스타그램 서비스는 반려견을 키우는 사용자들 간의 커뮤니티 공간으로 인스타그램과 유사하게 사진과 제목, 게시글, 해시태그를 통해 소통하며 좋아요, 댓글, 공유 등의 기능을 제공합니다.

사용자가 이러한 콘텐츠의 상세 내용을 탐색할 때 페이지와 모달 중 어떤 방식을 사용할 것인지에 대한 고민이 있었습니다. 사용자 경험 측면에서 연속적인 탐색 흐름을 유지하는 것이 매우 중요하다고 판단하여 페이지 이동 없이 현재 화면에서 추가 작업을 할 수 있도록 모달을 사용해서 상세 정보를 표시하기로 결정했습니다.

그러나 모달은 다음과 같은 근본적인 문제를 안고 있었습니다.

- **SEO에 불리**: 별도의 URL을 가지지 않아 검색 엔진에 노출되기 어렵습니다.
- **공유의 어려움**: 특정 모달의 내용을 다른 사람과 공유하려면 전체 페이지 URL만 전달되어 사용자가 링크를 받았을 때 해당 모달을 직접 다시 열어야 하는 불편함이 있었습니다.
- **탐색 흐름 단절**: 일반적인 모달 구현 방식은 뒤로 가기 버튼을 눌렀을 때 전체 페이지가 닫히면서 탐색 흐름이 끊기거나, 모달 진입 전의 스크롤 위치가 유지되지 않는 등의 문제가 있었습니다.

이러한 문제들은 인스타그램과 같이 여러 콘텐츠를 연속적으로 소비하며 사용자 만족감을 높여야 하는 서비스의 본질적인 목표와 상충되는 지점이었습니다.

**[ 해결 과정 및 적용 기술 ]**

사용자의 연속적인 탐색 흐름과 몰입감을 유지하면서도 개별 콘텐츠의 URL 접근성과 공유 가능성을 확보하는 방안을 모색했습니다. 즉, 모달이 콘텐츠 소비의 주요 방식이 되면서도 필요할 경우 해당 콘텐츠로 직접 접근하거나 공유할 수 있어야 한다는 결론에 도달했습니다.

이를 위해 Next.js 13의 App Router에서 제공하는 **인터셉트 라우트와 병렬 라우트** 기능을 활용했습니다. URL이 변경되더라도 실제 페이지 전환 없이 현재 화면 위에 모달을 띄우는 방식으로 사용자 경험을 향상하고자 했습니다.

- **URL 동기화를 통한 모달 구현**

  - 인터셉트 라우트 기술을 활용해 멍스타그램 피드 페이지에서 멍스타그램 피드 상세 모달로 이동하는 요청을 가로채도록 구현했습니다.

    ```
    📁 src
    └── 📁 app
        └── 📁 (providers)
            ├── 📁 @modal
            │   ├── 📁 (.)mungstagram
            │   │   └── 📁 [id]
            │   │       └── 📄 page.tsx
            │   └── 📄 default.tsx
            ├── 📁 mungstagram
            │   ├── 📁 [id]
            │   │   └── 📄 page.tsx
            │   └── 📄 page.tsx
            └── 📄 layout.tsx
    ```

  - 레이아웃 파일에 `@modal` 슬롯을 정의하여 가로채기된 경로의 콘텐츠가 이 슬롯에 렌더링되도록 했습니다. URL은 변경되지만 사용자 입장에서는 현재 피드 페이지의 맥락을 유지한 채 모달이 열려 끊김 없이 콘텐츠를 탐색할 수 있습니다.

    ```tsx
    // src\\app\\(providers)\\layout.tsx
    function ProvidersLayout({ children, modal }: {
      children: React.ReactNode;
      modal: React.ReactNode;
    }) {
      return (
        // ...
          {children}
          {modal}
        // ...
      );
    }
    ```

  - 사용자가 공유된 URL을 직접 브라우저에 입력하거나 새로고침할 경우 인터셉트 라우트가 작동하지 않고 원래의 상세 페이지가 렌더링되도록 했습니다. 이로써 사용자의 직접 접근에도 일관된 정보 접근성을 보장합니다.

**[ 결과 ]**

Next.js 인터셉트/병렬 라우트를 활용하여 페이지 전환 없는 모달 형태의 상세 조회를 구현했고 개별 URL을 통한 공유 및 직접 접근성을 확보하여 끊김 없는 콘텐츠 탐색 경험과 SEO 이점을 동시에 달성했습니다.

사용자들은 끊김 없이 자유롭게 게시글을 소비하고 공유할 수 있게 되어 서비스 만족도를 크게 향상시켰습니다.

### 🛠️ 사용 기술 및 라이브러리

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/4a67606d-9ca2-4c59-9f0a-cc3d624def63/d46111bd-ed3d-4f9f-9136-0f0a0913ac83/Untitled.png)

- **Next.js**: 다양한 렌더링 방식을 유연하게 활용하고 SEO 최적화를 통해 검색 노출 효과를 높이기 위해 선택
- **TypeScript**: 팀 협업 환경에서 코드의 안정성을 확보하고 런타임 오류를 사전에 방지하여 안정성 확보와 유지보수성 향상
- Zustand:  Redux 대비 보일러플레이트가 적고 직관적인 API로 전역 상태를 간단하고 유연하게 관리하기 위해 사용
- React Query (TanStack Query): 서버 상태 관리 및 캐싱 최적화를 통해 중복 요청을 방지하고 UX를 개선
- Sass + CSS Module: 컴포넌트 단위 스타일 관리로 스타일 충돌을 방지하고 재사용성을 높여 생산성을 확보
- Supabase: Auth, Realtime, Storage 등 백엔드 기능을 빠르게 구축해 프론트엔드 개발에 집중
- 공공 API / Kakao API: 유기견 공고와 반려견 동반 시설 데이터를 제공하고 SNS 공유 및 지도 기반 기능을 구현하기 위해 활용
- **Git & GitHub**: 팀 프로젝트의 효율적인 버전 관리 및 협업을 위해 Git Flow 전략과 GitHub의 다양한 관리 기능을 적극 활용하여 생산성 향상
- **Vercel**: Next.js 프로젝트에 최적화된 배포 환경으로 간편한 CI/CD 구축 및 안정적이고 빠른 서비스 제공

### **📂** 폴더 구조

```jsx
src/
├── apis/                # API 통신 함수 모음 (도메인별 분리)
├── app/                 # Next.js App Router 기반 라우팅
│   ├── (providers)/     # 모달/병렬 라우팅 관리
│   │   └── @modal/      # Parallel Route: 모달 라우팅
│   │       └── (.)mungstagram/  # Intercepting Route: 피드 → 상세 모달
│   ├── auth/            # 로그인/회원가입 및 콜백 처리
│   ├── facilities/      # 반려동물 동반 시설 페이지
│   ├── mungstagram/     # 멍스타그램 피드/상세/작성/수정
│   ├── profile/         # 사용자 프로필 및 마이페이지
│   ├── stray-dogs/      # 유기견 공고 목록 및 상세
│   ├── used-goods/      # 중고 물품 거래 (목록/상세/작성/수정)
│   ├── _components/     # app 전용 공통 UI 컴포넌트
│   ├── layout.tsx       # 전역 레이아웃
│   ├── not-found.tsx    # 404 페이지
│   └── globals.css
├── assets/              # 정적 리소스 (폰트)
├── data/                # 정적 데이터 (예: 지역 목록 JSON)
├── hooks/               # 커스텀 훅 모음
├── shared/              # 전역 공유 모듈
│   ├── constant/
│   ├── supabase/        # Supabase 초기화 및 타입 정의
│   ├── zustand/         # 전역 상태 관리
│   └── modal.ts
├── utils/               # 유틸리티 함수 모음 (파일, 시간 등)
└── middleware.ts        # Next.js 미들웨어 (인증, 리다이렉션 처리)

# 루트 설정 파일
├── next.config.js
├── tsconfig.json
├── .eslintrc.json / .prettierrc
└── .env
```