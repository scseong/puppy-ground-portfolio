## **🐶 Puppy Ground (퍼피 그라운드)**

**반려견 중고 물품 거래 & 정보 공유 플랫폼**

> 반려견 중고 용품 거래를 통해 자원 순환을 돕고, 유기견 입양 및 동반 시설 정보 공유를 통해 책임감 있는 반려 문화를 조성하고자 기획된 커뮤니티 기반 웹 서비스입니다.

> 📌 스파르타코딩클럽 내일배움캠프에서 활동하며 진행한 팀프로젝트입니다.

### 🚀 Summary (핵심 기여 요약)

- 중고거래 서비스의 검색·필터·페이지네이션 구조를 설계 및 구현하여 복잡한 조건 조합에서도 일관된 탐색 경험을 제공
- 멍스타그램 상세 조회에 인터셉트/병렬 라우팅 기반 모달 구조를 구축하여 페이지 전환 없이도 콘텐츠 탐색과 URL 공유가 모두 가능하도록 개선
- 팀 협업 환경을 위해 Git Flow 전략, 코드 컨벤션, PR 리뷰 프로세스를 도입하며 개발 효율과 코드 품질 향상

### 🌟 핵심 기능

- **회원가입/로그인:** Supabase Auth 기반 이메일·카카오·구글 로그인
- **중고거래:** 목록/상세 조회, 필터·검색·페이지네이션, 지도 기반 거래 위치, 찜·채팅·SNS 공유
- **멍스타그램:** 피드, 이미지 멀티 업로드, 태그, 좋아요·댓글, 모달 상세 보기
- **반려견 동반 시설:** Kakao Map API 기반 주변 시설 표시 및 키워드 검색
- **유기견 공고:** 공공데이터 API 연동, 지역/날짜별 필터
- **마이페이지:** 프로필 수정, 찜한 상품, 좋아요한 게시물
- **실시간 알림·채팅:** Supabase Realtime 기반

### **📌 담당 역할 및 주요 기여**

- **[ 중고거래 탐색 기능 개발 ]**
  - **검색·필터·페이지네이션 로직을 통합 설계**하여 필터 간 의존성으로 인한 불일치 문제를 제거
  - 필터 상태를 **URL 쿼리 기반으로 통합 관리**해 새로고침/페이지 이동 후에도 조건이 유지되는 UX 구현
  - TanStack Query의 **동적 queryKey 전략**을 적용하여 캐싱 효율을 높이고 중복 요청을 최소화
- **[ 멍스타그램 상세 모달 라우팅 구축 ]**
  - Next.js App Router의 **Intercepting Route + Parallel Route**를 활용해 페이지 이동 없이 모달로 탐색과 개별 URL 접근성을 동시에 확보
  - 공유된 URL 접근 시에는 정적 상세 페이지, 피드 내 탐색 시에는 모달이 열리는 자연스러운 UX 설계
  
- **[ 팀 협업 프로세스 리드 ]**
  - Git Flow 브랜치 전략, **Issue/PR/Projects/Milestones 기반 협업 체계** 구축
  - 코드 품질 유지를 위해 **팀 코드 컨벤션 문서 작성 및 PR 리뷰 문화 도입** 주도
  - Slack–GitHub 연동을 적용해 **실시간 알림 환경**을 구축해 팀 작업 효율 향상

### **💥 트러블슈팅**

**#1. 다중 필터 조합 시 상태 불일치 문제**

**[ 문제 정의 ]**

중고거래 목록은 카테고리/견종 크기/판매 여부/검색어/페이지네이션이 서로 조합되는 구조였고 초기 구현은 각 필터를 개별 state로 관리 → 아래의 문제 발생

- 필터 간 의존성 충돌로 에상치 못한 동작 발생
- 페이지 이동 후 다시 돌아왔을 때 필터 초기화로 UX 저하
- 클라이언트 상태, 서버 데이터, URL의 **3중 상태가 동기화되지 않음**

**[ 해결 과정 및 적용 기술 ]**

1. 모든 필터 상태를 **URLSearchParams 기반으로 통합 관리**

   - 모든 필터 상태를 URL에 반영해 **URL이 단일 상태**가 되도록 구조 설계

   - 컴포넌트 내 상태로 관리하던 탐색 흐름을 제거하여 예측 가능한 상태 흐름 확보

2. **필터 우선순위 정의**로 상태 일관성 확보
   - 필터 우선순위(카테고리 > 견종 크기 > 판매 여부 > 페이지)를 정의하여 상위 필터 변경 시 하위 필터를 자동 초기화 (generateQueryParameter)

3. 커스텀 훅 `useQueryParam`으로 URL 상태 관리 자동화

   - URLSearchParams 조작을 위한 공용 유틸 및 훅 개발

   - 클라이언트에서 페이지 버튼/필터/검색어 등 상호작용이 발생하면 라우터 push → URL 변경 → 서버 컴포넌트(page.tsx) 재렌더링 → React Query hydration으로 자연스럽게 연동

4. TanStack Query를 활용한 **동적 queryKey로 캐싱** 효율화
   - URL의 모든 값이 queryKey에 포함되도록 설계
     - `queryKey: ['used-goods', { ...params }]`
   - 조건 변경 시 필요한 데이터만 재요청하고 같은 조건에서는 캐시에서 즉시 반환

**[ 결과 ]**

- 복잡한 조건 조합에서도 **일관된 탐색 경험** 제공
- 뒤로 가기/새로고침에서도 **필터 유지**
- React Query 캐싱으로 **중복 API 요청 감소 및 체감 탐색 속도 향상**



**#2. 끊김 없는 콘텐츠 탐색을 위한 모달 라우팅 설계**

**[ 문제 정의 ]**

멍스타그램은 인스타그램과 유사한 연속 탐색 UX가 핵심인 서비스. 
상세 콘텐츠를 페이지로 열면 연속 흐름이 단절되고, 모달로 열면 URL이 없어 브라우저 뒤로 가기하면 전체 페이지 이동 발생 & SEO, 공유, 직접 접근, 새로고침 시 상태 복원 불가

→ 페이지처럼 접근 가능한 모달 필요

**[ 해결 과정 및 적용 기술 ]**

1. Next.js 13 **인터셉트 라우트(Intercepting Route)** 적용

   - 피드에서 상세로 이동할 때 실제 라우팅을 가로채 페이지 이동 대신 모달을 띄우는 구조로 설계

     - 피드 내부 이동 → 모달, 인터셉트URL 직접 접근 / 새로고침 → 페이지

   - ```json
     app/
      ├─ mungstagram/[id]/page.tsx          // 상세 페이지 (직접 접근 시)
      └─ (providers)/@modal/(.)mungstagram/[id]/page.tsx  // 피드 위에 뜨는 모달 상세
     ```

2. 병렬 라우트(Parallel Route)로 레이아웃에 모달 슬롯 제공

   - 레이아웃에서 모달을 위한 별도 슬롯을 정의해 모달이 항상 다른 페이지 위에 렌더링

     - → 페이지는 유지하고 모달만 겹쳐뜨는 구조

   - ```tsx
     function Layout({ children, modal }) {
       return (
         <>
           {children}
           {modal}
         </>
       );
     }
     ```

3. scroll 상태 유지 + 자연스러운 뒤로 가기 UX 구현

   - 피드 → 상세로 넘어갈 때 Link `scroll={false}` 옵션을 사용해 페이지 스크롤을 유지한 채 모달 오픈
   - 모달에서 닫기 시 `router.back()` → 모달만 닫히고 피드 상태 그대로 유지

4. 모달 내부에서도 이전/다음 게시물 탐색 기능 제공

   - 

**[ 결과 ]**

Next.js 인터셉트/병렬 라우트를 활용하여 페이지 전환 없는 모달 형태의 상세 조회를 구현했고 개별 URL을 통한 공유 및 직접 접근성을 확보하여 끊김 없는 콘텐츠 탐색 경험과 SEO 이점을 동시에 달성했습니다.

사용자들은 끊김 없이 자유롭게 게시글을 소비하고 공유할 수 있게 되어 서비스 만족도를 크게 향상시켰습니다.

### 🛠️ 사용 기술 및 라이브러리

<img src="https://github.com/nbcamp-mot/puppy-ground/assets/82589401/1686884c-c4d1-415b-be05-eca562a625b1" width="600px">

- **Next.js, TypeScript** – 안정적인 구조 설계 및 SEO 최적화
- **TanStack Query** – 서버 상태 캐싱 및 비동기 최적화
- **Zustand** – 간단한 전역 상태 관리
- **Supabase** – Auth / Realtime / Storage 기반 기능 구현
- **Kakao Map API / 공공 API** – 지도 기반 탐색 및 유기견 공고 데이터 처리
- **Vercel**: 간편한 CI/CD 구축 및 안정적이고 빠른 서비스 제공

### **📂** 폴더 구조

```jsx
src/
├── apis/                # API 통신 함수 모음 (도메인별 분리)
├── app/                 # Next.js App Router 기반 라우팅
│   ├── (providers)/     # 모달/병렬 라우팅 관리
│   │   └── @modal/      # Parallel Route: 모달 라우팅
│   │       └── (.)mungstagram/  # Intercepting Route: 피드 → 상세 모달
│   ├── auth/            # 로그인/회원가입 및 콜백 처리
│   ├── facilities/      # 반려동물 동반 시설 페이지
│   ├── mungstagram/     # 멍스타그램 피드/상세/작성/수정
│   ├── profile/         # 사용자 프로필 및 마이페이지
│   ├── stray-dogs/      # 유기견 공고 목록 및 상세
│   ├── used-goods/      # 중고 물품 거래 (목록/상세/작성/수정)
│   ├── _components/     # app 전용 공통 UI 컴포넌트
│   ├── layout.tsx       # 전역 레이아웃
│   ├── not-found.tsx    # 404 페이지
│   └── globals.css
├── assets/              # 정적 리소스 (폰트)
├── data/                # 정적 데이터 (예: 지역 목록 JSON)
├── hooks/               # 커스텀 훅 모음
├── shared/              # 전역 공유 모듈
│   ├── constant/
│   ├── supabase/        # Supabase 초기화 및 타입 정의
│   ├── zustand/         # 전역 상태 관리
│   └── modal.ts
├── utils/               # 유틸리티 함수 모음 (파일, 시간 등)
└── middleware.ts        # Next.js 미들웨어 (인증, 리다이렉션 처리)

# 루트 설정 파일
├── next.config.js
├── tsconfig.json
├── .eslintrc.json / .prettierrc
└── .env
```
